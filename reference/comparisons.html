<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Difference, ratio, or function of adjusted predictions, calculated for
meaningfully different predictor values. The tidy() and summary()
functions can be used to aggregate and summarize the output of
comparisons(). To learn more, read the contrasts vignette, visit the
package website, or scroll down this page for a full list of vignettes:
https://vincentarelbundock.github.io/marginaleffects/articles/contrasts.html
https://vincentarelbundock.github.io/marginaleffects/

"><title>Contrasts Between Adjusted Predictions — comparisons • marginaleffects</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Contrasts Between Adjusted Predictions — comparisons"><meta property="og:description" content="Difference, ratio, or function of adjusted predictions, calculated for
meaningfully different predictor values. The tidy() and summary()
functions can be used to aggregate and summarize the output of
comparisons(). To learn more, read the contrasts vignette, visit the
package website, or scroll down this page for a full list of vignettes:
https://vincentarelbundock.github.io/marginaleffects/articles/contrasts.html
https://vincentarelbundock.github.io/marginaleffects/

"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-default navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">marginaleffects</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.8.1.9003</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="https://vincentarelbundock.github.io/marginaleffects/articles/predictions.html">Adjusted predictions</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="https://vincentarelbundock.github.io/marginaleffects/articles/marginaleffects.html">Marginal effects</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="https://vincentarelbundock.github.io/marginaleffects/articles/contrasts.html">Contrasts</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="https://vincentarelbundock.github.io/marginaleffects/articles/marginalmeans.html">Marginal means</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="https://vincentarelbundock.github.io/marginaleffects/articles/hypothesis.html">Hypothesis Tests</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Functions</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/vincentarelbundock/marginaleffects/">
    <span class="fab fa fab fa-github"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Contrasts Between Adjusted Predictions</h1>
      <small class="dont-index">Source: <a href="https://github.com/vincentarelbundock/marginaleffects/blob/HEAD/R/comparisons.R" class="external-link"><code>R/comparisons.R</code></a></small>
      <div class="d-none name"><code>comparisons.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Difference, ratio, or function of adjusted predictions, calculated for
meaningfully different predictor values. The <code><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy()</a></code> and <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code>
functions can be used to aggregate and summarize the output of
<code>comparisons()</code>. To learn more, read the contrasts vignette, visit the
package website, or scroll down this page for a full list of vignettes:</p><ul><li><p><a href="https://vincentarelbundock.github.io/marginaleffects/articles/contrasts.html">https://vincentarelbundock.github.io/marginaleffects/articles/contrasts.html</a></p></li>
<li><p><a href="https://vincentarelbundock.github.io/marginaleffects/">https://vincentarelbundock.github.io/marginaleffects/</a></p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">comparisons</span><span class="op">(</span></span>
<span>  <span class="va">model</span>,</span>
<span>  newdata <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  variables <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  type <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  vcov <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  conf_level <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  transform_pre <span class="op">=</span> <span class="st">"difference"</span>,</span>
<span>  transform_post <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cross <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  wts <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  hypothesis <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  eps <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>model</dt>
<dd><p>Model object</p></dd>


<dt>newdata</dt>
<dd><p><code>NULL</code>, data frame, string, or <code><a href="datagrid.html">datagrid()</a></code> call. Determines the predictor values for which to compute contrasts.</p><ul><li><p><code>NULL</code> (default): Unit-level contrasts for each observed value in the original dataset.</p></li>
<li><p>data frame: Unit-level contrasts for each row of the <code>newdata</code> data frame.</p></li>
<li><p>string:</p><ul><li><p>"mean": Contrasts at the Mean. Contrasts when each predictor is held at its mean or mode.</p></li>
<li><p>"median": Contrasts at the Median. Contrasts when each predictor is held at its median or mode.</p></li>
<li><p>"marginalmeans": Contrasts at Marginal Means.</p></li>
<li><p>"tukey": Contrasts at Tukey's 5 numbers.</p></li>
<li><p>"grid": Contrasts on a grid of representative numbers (Tukey's 5 numbers and unique values of categorical predictors).</p></li>
</ul></li>
<li><p><code><a href="datagrid.html">datagrid()</a></code> call to specify a custom grid of regressors. For example:</p><ul><li><p><code>newdata = datagrid(cyl = c(4, 6))</code>: <code>cyl</code> variable equal to 4 and 6 and other regressors fixed at their means or modes.</p></li>
<li><p><code>newdata = datagrid(mpg = fivenum)</code>: <code>mpg</code> variable held at Tukey's five numbers (using the <code>fivenum</code> function), and other regressors fixed at their means or modes.</p></li>
<li><p>See the Examples section and the <a href="datagrid.html">datagrid</a> documentation.</p></li>
</ul></li>
</ul></dd>


<dt>variables</dt>
<dd><p><code>NULL</code>, character vector, or named list. The subset of variables for which to compute contrasts.</p><ul><li><p><code>NULL</code>: compute contrasts for all the variables in the model object (can be slow).</p></li>
<li><p>Character vector: subset of variables (usually faster).</p></li>
<li><p>Named list: names identify the subset of variables of interest, and values define the type of contrast to compute. Acceptable values depend on the variable type:</p><ul><li><p>Factor or character variables:</p><ul><li><p>"reference": Each factor level is compared to the factor reference (base) level</p></li>
<li><p>"all": All combinations of observed levels</p></li>
<li><p>"sequential": Each factor level is compared to the previous factor level</p></li>
<li><p>"pairwise": Each factor level is compared to all other levels</p></li>
<li><p>Vector of length 2 with the two values to compare.</p></li>
</ul></li>
<li><p>Logical variables:</p><ul><li><p>NULL: contrast between TRUE and FALSE</p></li>
</ul></li>
<li><p>Numeric variables:</p><ul><li><p>Numeric of length 1: Contrast for a gap of <code>x</code>, computed at the observed value plus and minus <code>x / 2</code>. For example, estimating a <code>+1</code> contrast compares adjusted predictions when the regressor is equal to its observed value minus 0.5 and its observed value plus 0.5.</p></li>
<li><p>Numeric vector of length 2: Contrast between the 2nd element and the 1st element of the <code>x</code> vector.</p></li>
<li><p>Function which accepts a numeric vector and returns a data frame with two columns of "low" and "high" values to compare. See examples below.</p></li>
<li><p>"iqr": Contrast across the interquartile range of the regressor.</p></li>
<li><p>"sd": Contrast across one standard deviation around the regressor mean.</p></li>
<li><p>"2sd": Contrast across two standard deviations around the regressor mean.</p></li>
<li><p>"minmax": Contrast between the maximum and the minimum values of the regressor.</p></li>
</ul></li>
<li><p>Examples:</p><ul><li><p><code>variables = list(gear = "pairwise", hp = 10)</code></p></li>
<li><p><code>variables = list(gear = "sequential", hp = c(100, 120))</code></p></li>
<li><p>See the Examples section below for more.</p></li>
</ul></li>
</ul></li>
</ul></dd>


<dt>type</dt>
<dd><p>string indicates the type (scale) of the predictions used to
compute marginal effects or contrasts. This can differ based on the model
type, but will typically be a string such as: "response", "link", "probs",
or "zero". When an unsupported string is entered, the model-specific list of
acceptable values is returned in an error message. When <code>type</code> is <code>NULL</code>, the
default value is used. This default is the first model-related row in
the <code>marginaleffects:::type_dictionary</code> dataframe.</p></dd>


<dt>vcov</dt>
<dd><p>Type of uncertainty estimates to report (e.g., for robust standard errors). Acceptable values:</p><ul><li><p>FALSE: Do not compute standard errors. This can speed up computation considerably.</p></li>
<li><p>TRUE: Unit-level standard errors using the default <code>vcov(model)</code> variance-covariance matrix.</p></li>
<li><p>String which indicates the kind of uncertainty estimates to return.</p><ul><li><p>Heteroskedasticity-consistent: <code>"HC"</code>, <code>"HC0"</code>, <code>"HC1"</code>, <code>"HC2"</code>, <code>"HC3"</code>, <code>"HC4"</code>, <code>"HC4m"</code>, <code>"HC5"</code>. See <code><a href="https://sandwich.R-Forge.R-project.org/reference/vcovHC.html" class="external-link">?sandwich::vcovHC</a></code></p></li>
<li><p>Heteroskedasticity and autocorrelation consistent: <code>"HAC"</code></p></li>
<li><p>Mixed-Models degrees of freedom: "satterthwaite", "kenward-roger"</p></li>
<li><p>Other: <code>"NeweyWest"</code>, <code>"KernHAC"</code>, <code>"OPG"</code>. See the <code>sandwich</code> package documentation.</p></li>
</ul></li>
<li><p>One-sided formula which indicates the name of cluster variables (e.g., <code>~unit_id</code>). This formula is passed to the <code>cluster</code> argument of the <code><a href="https://sandwich.R-Forge.R-project.org/reference/vcovCL.html" class="external-link">sandwich::vcovCL</a></code> function.</p></li>
<li><p>Square covariance matrix</p></li>
<li><p>Function which returns a covariance matrix (e.g., <code>stats::vcov(model)</code>)</p></li>
</ul></dd>


<dt>conf_level</dt>
<dd><p>numeric value between 0 and 1. Confidence level to use to build a confidence interval.</p></dd>


<dt>transform_pre</dt>
<dd><p>string or function. How should pairs of adjusted predictions be contrasted?</p><ul><li><p>string: shortcuts to common contrast functions.</p><ul><li><p>Supported shortcuts strings: difference, differenceavg, differenceavgwts, dydx, eyex, eydx, dyex, dydxavg, eyexavg, eydxavg, dyexavg, dydxavgwts, eyexavgwts, eydxavgwts, dyexavgwts, ratio, ratioavg, ratioavgwts, lnratio, lnratioavg, lnratioavgwts, lnor, lnoravg, lnoravgwts, expdydx, expdydxavg, expdydxavgwts</p></li>
<li><p>See the Transformations section below for definitions of each transformation.</p></li>
</ul></li>
<li><p>function: accept two equal-length numeric vectors of adjusted predictions (<code>hi</code> and <code>lo</code>) and returns a vector of contrasts of the same length, or a unique numeric value.</p><ul><li><p>See the Transformations section below for examples of valid functions.</p></li>
</ul></li>
</ul></dd>


<dt>transform_post</dt>
<dd><p>string or function. Transformation applied to unit-level estimates and confidence intervals just before the function returns results. Functions must accept a vector and return a vector of the same length. Support string shortcuts: "exp", "ln"</p></dd>


<dt>cross</dt>
<dd><p>TRUE or FALSE</p><ul><li><p><code>FALSE</code>: Contrasts represent the change in adjusted predictions when one predictor changes and all other variables are held constant.</p></li>
<li><p><code>TRUE</code>: Contrasts represent the changes in adjusted predictions when all the predictors specified in the <code>variables</code> argument are manipulated simultaneously (a "cross-contrast").</p></li>
</ul></dd>


<dt>by</dt>
<dd><p>Compute group-wise average estimates. Valid inputs:</p><ul><li><p>Character vector of column names in <code>newdata</code> or in the data frame produced by calling the function without the <code>by</code> argument.</p></li>
<li><p>Data frame with a <code>by</code> column of group labels, and merging columns shared by <code>newdata</code> or the data frame produced by calling the same function without the <code>by</code> argument.</p></li>
<li><p>See examples below.</p></li>
</ul></dd>


<dt>wts</dt>
<dd><p>string or numeric: weights to use when computing average
contrasts or marginaleffects. These weights only affect the averaging in
<code><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy()</a></code> or <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code>, and not the unit-level estimates themselves.</p><ul><li><p>string: column name of the weights variable in <code>newdata</code>. When supplying a column name to <code>wts</code>, it is recommended to supply the original data (including the weights variable) explicitly to <code>newdata</code>.</p></li>
<li><p>numeric: vector of length equal to the number of rows in the original data or in <code>newdata</code> (if supplied).</p></li>
</ul></dd>


<dt>hypothesis</dt>
<dd><p>specify a hypothesis test or custom contrast using a vector, matrix, string, or string formula.</p><ul><li><p>String:</p><ul><li><p>"pairwise": pairwise differences between estimates in each row.</p></li>
<li><p>"reference": differences between the estimates in each row and the estimate in the first row.</p></li>
<li><p>"sequential": difference between an estimate and the estimate in the next row.</p></li>
<li><p>"revpairwise", "revreference", "revsequential": inverse of the corresponding hypotheses, as described above.</p></li>
</ul></li>
<li><p>String formula to specify linear or non-linear hypothesis tests. If the <code>term</code> column uniquely identifies rows, terms can be used in the formula. Otherwise, use <code>b1</code>, <code>b2</code>, etc. to identify the position of each parameter. Examples:</p><ul><li><p><code>hp = drat</code></p></li>
<li><p><code>hp + drat = 12</code></p></li>
<li><p><code>b1 + b2 + b3 = 0</code></p></li>
</ul></li>
<li><p>Numeric vector: Weights to compute a linear combination of (custom contrast between) estimates. Length equal to the number of rows generated by the same function call, but without the <code>hypothesis</code> argument.</p></li>
<li><p>Numeric matrix: Each column is a vector of weights, as describe above, used to compute a distinct linear combination of (contrast between) estimates. The column names of the matrix are used as labels in the output.</p></li>
<li><p>See the Examples section below and the vignette: https://vincentarelbundock.github.io/marginaleffects/articles/hypothesis.html</p></li>
</ul></dd>


<dt>eps</dt>
<dd><p>NULL or numeric value which determines the step size to use when
calculating numerical derivatives: (f(x+eps)-f(x))/eps. When <code>eps</code> is
<code>NULL</code>, the step size is 0.0001 multiplied by the difference between
the maximum and minimum values of the variable with respect to which we
are taking the derivative. Changing <code>eps</code> may be necessary to avoid
numerical problems in certain models.</p></dd>


<dt>...</dt>
<dd><p>Additional arguments are passed to the <code><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict()</a></code> method
supplied by the modeling package.These arguments are particularly useful
for mixed-effects or bayesian models (see the online vignettes on the
<code>marginaleffects</code> website). Available arguments can vary from model to
model, depending on the range of supported arguments by each modeling
package. See the "Model-Specific Arguments" section of the
<code><a href="marginaleffects.html">?marginaleffects</a></code> documentation for a non-exhaustive list of available
arguments.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>A "contrast" is a difference, ratio of function of adjusted predictions,
calculated for meaningfully different predictor values (e.g., College
graduates vs. Others). Uncertainty estimates are computed using the delta
method.</p>
<p>The <code>newdata</code> argument can be used to control the kind of contrasts to report:</p><ul><li><p>Average Contrasts</p></li>
<li><p>Adjusted Risk Ratios</p></li>
<li><p>Adjusted Risk Differences</p></li>
<li><p>Group-Average Contrasts</p></li>
<li><p>Contrasts at the Mean</p></li>
<li><p>Contrasts at User-Specified values (aka Contrasts at Representative values, MER).</p></li>
<li><p>Custom contrasts using arbitrary functions</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="vignettes-and-documentation">Vignettes and documentation<a class="anchor" aria-label="anchor" href="#vignettes-and-documentation"></a></h2>
    


<p>Vignettes:</p><ul><li><p><a href="https://vincentarelbundock.github.io/marginaleffects/articles/predictions.html">Adjusted Predictions</a></p></li>
<li><p><a href="https://vincentarelbundock.github.io/marginaleffects/articles/contrasts.html">Contrasts</a></p></li>
<li><p><a href="https://vincentarelbundock.github.io/marginaleffects/articles/marginaleffects.html">Marginal Effects</a></p></li>
<li><p><a href="https://vincentarelbundock.github.io/marginaleffects/articles/marginalmeans.html">Marginal Means</a></p></li>
<li><p><a href="https://vincentarelbundock.github.io/marginaleffects/articles/hypothesis.html">Hypothesis Tests and Custom Contrasts using the Delta Method</a></p></li>
</ul><p>Case studies:</p><ul><li><p><a href="https://vincentarelbundock.github.io/marginaleffects/articles/brms.html">Bayesian Analyses with <code>brms</code></a></p></li>
<li><p><a href="https://vincentarelbundock.github.io/marginaleffects/articles/gformula.html">Causal Inference with the g-Formula</a></p></li>
<li><p><a href="https://vincentarelbundock.github.io/marginaleffects/articles/elasticity.html">Elasticity</a></p></li>
<li><p><a href="https://vincentarelbundock.github.io/marginaleffects/articles/experiments.html">Experiments</a></p></li>
<li><p><a href="https://vincentarelbundock.github.io/marginaleffects/articles/gam.html">Generalized Additive Models</a></p></li>
<li><p><a href="https://vincentarelbundock.github.io/marginaleffects/articles/lme4.html">Mixed effects models</a></p></li>
<li><p><a href="https://vincentarelbundock.github.io/marginaleffects/articles/mlogit.html">Multinomial Logit and Discrete Choice Models</a></p></li>
<li><p><a href="https://vincentarelbundock.github.io/marginaleffects/articles/multiple_imputation.html">Multiple Imputation</a></p></li>
<li><p><a href="https://vincentarelbundock.github.io/marginaleffects/articles/plot.html">Plots: interactions, predictions, contrasts, and slopes</a></p></li>
<li><p><a href="https://vincentarelbundock.github.io/marginaleffects/articles/python.html">Python NumPyro models in <code>marginaleffects</code></a></p></li>
<li><p><a href="https://vincentarelbundock.github.io/marginaleffects/articles/logistic_contrasts.html">Unit-level contrasts in logistic regressions</a></p></li>
</ul><p>Tips and technical notes:</p><ul><li><p><a href="https://vincentarelbundock.github.io/marginaleffects/articles/supported_models.html">71 Supported Classes of Models</a></p></li>
<li><p><a href="https://vincentarelbundock.github.io/marginaleffects/reference/index.html">Index of Functions and Documentation</a></p></li>
<li><p><a href="https://vincentarelbundock.github.io/marginaleffects/articles/extensions.html">Extending <code>marginaleffects</code>: add new models or modify existing ones</a></p></li>
<li><p><a href="https://vincentarelbundock.github.io/marginaleffects/articles/sandwich.html">Standard Errors and Confidence Intervals</a></p></li>
<li><p><a href="https://vincentarelbundock.github.io/marginaleffects/articles/modelsummary.html">Tables and Plots</a></p></li>
<li><p><a href="https://vincentarelbundock.github.io/marginaleffects/articles/performance.html">Performance</a></p></li>
<li><p><a href="https://vincentarelbundock.github.io/marginaleffects/articles/alternative_software.html">Alternative Software</a></p></li>
<li><p><a href="https://vincentarelbundock.github.io/marginaleffects/articles/faq.html">Frequently Asked Questions</a></p></li>
</ul></div>
    <div class="section level2">
    <h2 id="model-specific-arguments">Model-Specific Arguments<a class="anchor" aria-label="anchor" href="#model-specific-arguments"></a></h2>
    


<p>Some model types allow model-specific arguments to modify the nature of
marginal effects, predictions, marginal means, and contrasts.</p><table class="table table"><tr><td>Package</td><td>Class</td><td>Argument</td><td>Documentation</td></tr><tr><td><code>brms</code></td><td><code>brmsfit</code></td><td><code>ndraws</code></td><td><a href="https://rdrr.io/pkg/brms/man/posterior_predict.brmsfit.html" class="external-link">brms::posterior_predict</a></td></tr><tr><td></td><td></td><td><code>re_formula</code></td><td></td></tr><tr><td><code>lme4</code></td><td><code>merMod</code></td><td><code>include_random</code></td><td><a href="https://easystats.github.io/insight/reference/get_predicted.html" class="external-link">insight::get_predicted</a></td></tr><tr><td></td><td></td><td><code>re.form</code></td><td><a href="https://rdrr.io/pkg/lme4/man/predict.merMod.html" class="external-link">lme4::predict.merMod</a></td></tr><tr><td></td><td></td><td><code>allow.new.levels</code></td><td><a href="https://rdrr.io/pkg/lme4/man/predict.merMod.html" class="external-link">lme4::predict.merMod</a></td></tr><tr><td><code>glmmTMB</code></td><td><code>glmmTMB</code></td><td><code>re.form</code></td><td><a href="https://rdrr.io/pkg/glmmTMB/man/predict.glmmTMB.html" class="external-link">glmmTMB::predict.glmmTMB</a></td></tr><tr><td></td><td></td><td><code>allow.new.levels</code></td><td><a href="https://rdrr.io/pkg/glmmTMB/man/predict.glmmTMB.html" class="external-link">glmmTMB::predict.glmmTMB</a></td></tr><tr><td></td><td></td><td><code>zitype</code></td><td><a href="https://rdrr.io/pkg/glmmTMB/man/predict.glmmTMB.html" class="external-link">glmmTMB::predict.glmmTMB</a></td></tr><tr><td><code>mgcv</code></td><td><code>bam</code></td><td><code>exclude</code></td><td><a href="https://rdrr.io/pkg/mgcv/man/predict.bam.html" class="external-link">mgcv::predict.bam</a></td></tr><tr><td><code>robustlmm</code></td><td><code>rlmerMod</code></td><td><code>re.form</code></td><td><a href="https://rdrr.io/pkg/robustlmm/man/rlmerMod-class.html" class="external-link">robustlmm::predict.rlmerMod</a></td></tr><tr><td></td><td></td><td><code>allow.new.levels</code></td><td><a href="https://rdrr.io/pkg/robustlmm/man/rlmerMod-class.html" class="external-link">robustlmm::predict.rlmerMod</a></td></tr></table></div>
    <div class="section level2">
    <h2 id="transformations">Transformations<a class="anchor" aria-label="anchor" href="#transformations"></a></h2>
    


<p>The following transformations can be applied by supplying one of the shortcut strings to the
<code>transform_pre</code> argument.
<code>hi</code> is a vector of adjusted predictions for the "high" side of the
contrast. <code>lo</code> is a vector of adjusted predictions for the "low" side of the
contrast. <code>y</code> is a vector of adjusted predictions for the original data. <code>x</code>
is the predictor in the original data. <code>eps</code> is the step size to use to
compute derivatives and elasticities.</p><table class="table table"><tr><td>Shortcut</td><td>Function</td></tr><tr><td>difference</td><td>\(hi, lo) hi - lo</td></tr><tr><td>differenceavg</td><td>\(hi, lo) mean(hi) - mean(lo)</td></tr><tr><td>differenceavgwts</td><td>\(hi, lo, w) wmean(hi, w) - wmean(lo, w)</td></tr><tr><td>dydx</td><td>\(hi, lo, eps) (hi - lo)/eps</td></tr><tr><td>eyex</td><td>\(hi, lo, eps, y, x) (hi - lo)/eps * (x/y)</td></tr><tr><td>eydx</td><td>\(hi, lo, eps, y, x) ((hi - lo)/eps)/y</td></tr><tr><td>dyex</td><td>\(hi, lo, eps, x) ((hi - lo)/eps) * x</td></tr><tr><td>dydxavg</td><td>\(hi, lo, eps) mean((hi - lo)/eps)</td></tr><tr><td>eyexavg</td><td>\(hi, lo, eps, y, x) mean((hi - lo)/eps * (x/y))</td></tr><tr><td>eydxavg</td><td>\(hi, lo, eps, y, x) mean(((hi - lo)/eps)/y)</td></tr><tr><td>dyexavg</td><td>\(hi, lo, eps, x) mean(((hi - lo)/eps) * x)</td></tr><tr><td>dydxavgwts</td><td>\(hi, lo, eps, w) wmean((hi - lo)/eps, w)</td></tr><tr><td>eyexavgwts</td><td>\(hi, lo, eps, y, x, w) wmean((hi - lo)/eps * (x/y), w)</td></tr><tr><td>eydxavgwts</td><td>\(hi, lo, eps, y, x, w) wmean(((hi - lo)/eps)/y, w)</td></tr><tr><td>dyexavgwts</td><td>\(hi, lo, eps, x, w) wmean(((hi - lo)/eps) * x, w)</td></tr><tr><td>ratio</td><td>\(hi, lo) hi/lo</td></tr><tr><td>ratioavg</td><td>\(hi, lo) mean(hi)/mean(lo)</td></tr><tr><td>ratioavgwts</td><td>\(hi, lo) wmean(hi)/wmean(lo)</td></tr><tr><td>lnratio</td><td>\(hi, lo) log(hi/lo)</td></tr><tr><td>lnratioavg</td><td>\(hi, lo) log(mean(hi)/mean(lo))</td></tr><tr><td>lnratioavgwts</td><td>\(hi, lo) log(wmean(hi)/wmean(lo))</td></tr><tr><td>lnor</td><td>\(hi, lo) log((hi/(1 - hi))/(lo/(1 - lo)))</td></tr><tr><td>lnoravg</td><td>\(hi, lo) log((mean(hi)/(1 - mean(hi)))/(mean(lo)/(1 - mean(lo))))</td></tr><tr><td>lnoravgwts</td><td>\(hi, lo, w) log((wmean(hi, w)/(1 - wmean(hi, w)))/(wmean(lo, w)/(1 - wmean(lo, w))))</td></tr><tr><td>expdydx</td><td>\(hi, lo, eps) ((exp(hi) - exp(lo))/exp(eps))/eps</td></tr><tr><td>expdydxavg</td><td>\(hi, lo, eps) mean(((exp(hi) - exp(lo))/exp(eps))/eps)</td></tr><tr><td>expdydxavgwts</td><td>\(hi, lo, eps, w) wmean(((exp(hi) - exp(lo))/exp(eps))/eps, w)</td></tr></table></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://vincentarelbundock.github.io/marginaleffects/">marginaleffects</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Linear model</span></span></span>
<span class="r-in"><span><span class="va">tmp</span> <span class="op">&lt;-</span> <span class="va">mtcars</span></span></span>
<span class="r-in"><span><span class="va">tmp</span><span class="op">$</span><span class="va">am</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/logical.html" class="external-link">as.logical</a></span><span class="op">(</span><span class="va">tmp</span><span class="op">$</span><span class="va">am</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">am</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span>, <span class="va">tmp</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">comparisons</span><span class="op">(</span><span class="va">mod</span>, variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>cyl <span class="op">=</span> <span class="st">"reference"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>The `cyl` variable is treated as a categorical (factor) variable, but</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   the original data is of class numeric. It is safer and faster to convert</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   such variables to factor before fitting the model and calling</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   `marginaleffects` functions.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   </span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   This warning appears once per session.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       type term contrast   estimate std.error statistic      p.value   conf.low</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 response  cyl    6 - 4  -6.156118  1.535723 -4.008612 6.107658e-05  -9.166079</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 response  cyl    8 - 4 -10.067560  1.452082 -6.933187 4.114626e-12 -12.913589</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   conf.high</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 -3.146156</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 -7.221530</span>
<span class="r-in"><span><span class="fu">comparisons</span><span class="op">(</span><span class="va">mod</span>, variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>cyl <span class="op">=</span> <span class="st">"sequential"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       type term contrast  estimate std.error statistic      p.value  conf.low</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 response  cyl    6 - 4 -6.156118  1.535723 -4.008612 6.107658e-05 -9.166079</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 response  cyl    8 - 6 -3.911442  1.470254 -2.660385 7.805144e-03 -6.793087</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   conf.high</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 -3.146156</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 -1.029797</span>
<span class="r-in"><span><span class="fu">comparisons</span><span class="op">(</span><span class="va">mod</span>, variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>cyl <span class="op">=</span> <span class="st">"pairwise"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       type term contrast   estimate std.error statistic      p.value   conf.low</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 response  cyl    6 - 4  -6.156118  1.535723 -4.008612 6.107658e-05  -9.166079</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 response  cyl    8 - 4 -10.067560  1.452082 -6.933187 4.114626e-12 -12.913589</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 response  cyl    8 - 6  -3.911442  1.470254 -2.660385 7.805144e-03  -6.793087</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   conf.high</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 -3.146156</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 -7.221530</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 -1.029797</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># GLM with different scale types</span></span></span>
<span class="r-in"><span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">am</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">gear</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">comparisons</span><span class="op">(</span><span class="va">mod</span>, type <span class="op">=</span> <span class="st">"response"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       type term contrast  estimate std.error statistic      p.value  conf.low</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 response gear    4 - 3 0.6666667 0.1174440  5.676462 1.375090e-08 0.4364806</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 response gear    5 - 3 1.0000000 0.1565921  6.386020 1.702589e-10 0.6930852</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   conf.high</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.8968528</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 1.3069148</span>
<span class="r-in"><span><span class="fu">comparisons</span><span class="op">(</span><span class="va">mod</span>, type <span class="op">=</span> <span class="st">"link"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   type term contrast  estimate std.error statistic      p.value  conf.low</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 link gear    4 - 3 0.6666667 0.1174440  5.676462 1.375090e-08 0.4364806</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 link gear    5 - 3 1.0000000 0.1565921  6.386020 1.702589e-10 0.6930852</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   conf.high</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.8968528</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 1.3069148</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Contrasts at the mean</span></span></span>
<span class="r-in"><span><span class="fu">comparisons</span><span class="op">(</span><span class="va">mod</span>, newdata <span class="op">=</span> <span class="st">"mean"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   rowid     type term contrast comparison std.error statistic      p.value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     1 response gear    4 - 3  0.6666667 0.1174440  5.676462 1.375090e-08</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     1 response gear    5 - 3  1.0000000 0.1565921  6.386020 1.702589e-10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    conf.low conf.high     predicted predicted_hi  predicted_lo      am gear</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.4364806 0.8968528 -2.355139e-16    0.6666667 -2.355139e-16 0.40625    3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.6930852 1.3069148 -2.355139e-16    1.0000000 -2.355139e-16 0.40625    3</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Contrasts between marginal means</span></span></span>
<span class="r-in"><span><span class="fu">comparisons</span><span class="op">(</span><span class="va">mod</span>, newdata <span class="op">=</span> <span class="st">"marginalmeans"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       type term contrast comparison std.error statistic      p.value  conf.low</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 response gear    4 - 3  0.6666667 0.1174440  5.676462 1.375090e-08 0.4364806</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 response gear    5 - 3  1.0000000 0.1565921  6.386020 1.702589e-10 0.6930852</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   conf.high predicted predicted_hi  predicted_lo</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.8968528 0.5555556    0.6666667 -2.355139e-16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 1.3069148 0.5555556    1.0000000 -2.355139e-16</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Contrasts at user-specified values</span></span></span>
<span class="r-in"><span><span class="fu">comparisons</span><span class="op">(</span><span class="va">mod</span>, newdata <span class="op">=</span> <span class="fu"><a href="datagrid.html">datagrid</a></span><span class="op">(</span>am <span class="op">=</span> <span class="fl">0</span>, gear <span class="op">=</span> <span class="va">tmp</span><span class="op">$</span><span class="va">gear</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   rowid     type term contrast comparison std.error statistic      p.value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     1 response gear    4 - 3  0.6666667 0.1174440  5.676462 1.375090e-08</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     2 response gear    4 - 3  0.6666667 0.1174440  5.676462 1.375090e-08</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     3 response gear    4 - 3  0.6666667 0.1174440  5.676462 1.375090e-08</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     1 response gear    5 - 3  1.0000000 0.1565921  6.386020 1.702589e-10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     2 response gear    5 - 3  1.0000000 0.1565921  6.386020 1.702589e-10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     3 response gear    5 - 3  1.0000000 0.1565921  6.386020 1.702589e-10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    conf.low conf.high     predicted predicted_hi  predicted_lo am gear</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.4364806 0.8968528  6.666667e-01    0.6666667 -2.355139e-16  0    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.4364806 0.8968528 -2.355139e-16    0.6666667 -2.355139e-16  0    3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.4364806 0.8968528  1.000000e+00    0.6666667 -2.355139e-16  0    5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.6930852 1.3069148  6.666667e-01    1.0000000 -2.355139e-16  0    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 0.6930852 1.3069148 -2.355139e-16    1.0000000 -2.355139e-16  0    3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 0.6930852 1.3069148  1.000000e+00    1.0000000 -2.355139e-16  0    5</span>
<span class="r-in"><span><span class="fu">comparisons</span><span class="op">(</span><span class="va">mod</span>, newdata <span class="op">=</span> <span class="fu"><a href="datagrid.html">datagrid</a></span><span class="op">(</span>am <span class="op">=</span> <span class="va">unique</span>, gear <span class="op">=</span> <span class="va">max</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   rowid     type term contrast comparison std.error statistic      p.value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     1 response gear    4 - 3  0.6666667 0.1174440  5.676462 1.375090e-08</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     2 response gear    4 - 3  0.6666667 0.1174440  5.676462 1.375090e-08</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     1 response gear    5 - 3  1.0000000 0.1565921  6.386020 1.702589e-10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     2 response gear    5 - 3  1.0000000 0.1565921  6.386020 1.702589e-10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    conf.low conf.high predicted predicted_hi  predicted_lo am gear</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.4364806 0.8968528         1    0.6666667 -2.355139e-16  1    5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.4364806 0.8968528         1    0.6666667 -2.355139e-16  0    5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.6930852 1.3069148         1    1.0000000 -2.355139e-16  1    5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.6930852 1.3069148         1    1.0000000 -2.355139e-16  0    5</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">hp</span> <span class="op">+</span> <span class="va">drat</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">am</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">comparisons</span><span class="op">(</span><span class="va">m</span>, variables <span class="op">=</span> <span class="st">"hp"</span>, newdata <span class="op">=</span> <span class="fu"><a href="datagrid.html">datagrid</a></span><span class="op">(</span>FUN_factor <span class="op">=</span> <span class="va">unique</span>, FUN_numeric <span class="op">=</span> <span class="va">median</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   rowid     type term contrast  comparison  std.error statistic     p.value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     1 response   hp       +1 -0.04522926 0.01489036 -3.037487 0.002385599</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     2 response   hp       +1 -0.04522926 0.01489036 -3.037487 0.002385599</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     3 response   hp       +1 -0.04522926 0.01489036 -3.037487 0.002385599</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     4 response   hp       +1 -0.04522926 0.01489036 -3.037487 0.002385599</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     5 response   hp       +1 -0.04522926 0.01489036 -3.037487 0.002385599</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     6 response   hp       +1 -0.04522926 0.01489036 -3.037487 0.002385599</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      conf.low  conf.high predicted predicted_hi predicted_lo  mpg  hp  drat cyl</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 -0.07441382 -0.0160447  21.95333     21.93072     21.97595 19.2 123 3.695   6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 -0.07441382 -0.0160447  18.18910     18.16648     18.21171 19.2 123 3.695   6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 -0.07441382 -0.0160447  25.54890     25.52628     25.57151 19.2 123 3.695   4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 -0.07441382 -0.0160447  21.78467     21.76205     21.80728 19.2 123 3.695   4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 -0.07441382 -0.0160447  22.61705     22.59444     22.63967 19.2 123 3.695   8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 -0.07441382 -0.0160447  18.85282     18.83020     18.87543 19.2 123 3.695   8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   am    eps</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  1 0.0283</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  0 0.0283</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  1 0.0283</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  0 0.0283</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  1 0.0283</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  0 0.0283</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Numeric contrasts</span></span></span>
<span class="r-in"><span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">hp</span>, data <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">comparisons</span><span class="op">(</span><span class="va">mod</span>, variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>hp <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       type term contrast    estimate std.error statistic      p.value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 response   hp       +1 -0.06822828 0.0101193 -6.742389 1.558037e-11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      conf.low   conf.high</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 -0.08806175 -0.04839481</span>
<span class="r-in"><span><span class="fu">comparisons</span><span class="op">(</span><span class="va">mod</span>, variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>hp <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       type term contrast   estimate  std.error statistic      p.value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 response   hp       +5 -0.3411414 0.05059652 -6.742389 1.558038e-11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     conf.low conf.high</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 -0.4403087 -0.241974</span>
<span class="r-in"><span><span class="fu">comparisons</span><span class="op">(</span><span class="va">mod</span>, variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>hp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">90</span>, <span class="fl">100</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       type term contrast   estimate std.error statistic      p.value   conf.low</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 response   hp 100 - 90 -0.6822828  0.101193 -6.742389 1.558038e-11 -0.8806175</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    conf.high</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 -0.4839481</span>
<span class="r-in"><span><span class="fu">comparisons</span><span class="op">(</span><span class="va">mod</span>, variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>hp <span class="op">=</span> <span class="st">"iqr"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       type term contrast  estimate std.error statistic      p.value  conf.low</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 response   hp  Q3 - Q1 -5.697061 0.8449619 -6.742389 1.558038e-11 -7.353156</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   conf.high</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 -4.040966</span>
<span class="r-in"><span><span class="fu">comparisons</span><span class="op">(</span><span class="va">mod</span>, variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>hp <span class="op">=</span> <span class="st">"sd"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       type term                contrast  estimate std.error statistic</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 response   hp (x + sd/2) - (x - sd/2) -4.677926 0.6938085 -6.742389</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        p.value  conf.low conf.high</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 1.558038e-11 -6.037766 -3.318087</span>
<span class="r-in"><span><span class="fu">comparisons</span><span class="op">(</span><span class="va">mod</span>, variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>hp <span class="op">=</span> <span class="st">"minmax"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       type term  contrast estimate std.error statistic      p.value  conf.low</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 response   hp Max - Min -19.3086  2.863763 -6.742389 1.558038e-11 -24.92147</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   conf.high</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 -13.69573</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># using a function to specify a custom difference in one regressor</span></span></span>
<span class="r-in"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">mtcars</span></span></span>
<span class="r-in"><span><span class="va">dat</span><span class="op">$</span><span class="va">new_hp</span> <span class="op">&lt;-</span> <span class="fl">49</span> <span class="op">*</span> <span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">hp</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">hp</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">hp</span><span class="op">)</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">hp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span></span></span>
<span class="r-in"><span><span class="va">modlog</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">new_hp</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">dat</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fdiff</span> <span class="op">&lt;-</span> \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">x</span> <span class="op">+</span> <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">comparisons</span><span class="op">(</span><span class="va">modlog</span>, variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>new_hp <span class="op">=</span> <span class="va">fdiff</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Term Contrast Effect Std. Error z value  Pr(&gt;|z|)  2.5 %  97.5 %</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 new_hp   custom -1.974     0.7105  -2.778 0.0054696 -3.366 -0.5812</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Model type:  lm </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Prediction type:  response </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Adjusted Risk Ratio: see the contrasts vignette</span></span></span>
<span class="r-in"><span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">vs</span> <span class="op">~</span> <span class="va">mpg</span>, data <span class="op">=</span> <span class="va">mtcars</span>, family <span class="op">=</span> <span class="va">binomial</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">cmp</span> <span class="op">&lt;-</span> <span class="fu">comparisons</span><span class="op">(</span><span class="va">mod</span>, transform_pre <span class="op">=</span> <span class="st">"lnratioavg"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">cmp</span>, transform_avg <span class="op">=</span> <span class="va">exp</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Term Contrast Effect   Pr(&gt;|z|) 2.5 % 97.5 %</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  mpg mean(+1)  1.135 2.3808e-10 1.091   1.18</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Model type:  glm </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Prediction type:  response </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Average-transformation:  exp </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Adjusted Risk Ratio: Manual specification of the `transform_pre`</span></span></span>
<span class="r-in"><span><span class="va">cmp</span> <span class="op">&lt;-</span> <span class="fu">comparisons</span><span class="op">(</span><span class="va">mod</span>, transform_pre <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">hi</span>, <span class="va">lo</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">hi</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">lo</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">cmp</span>, transform_avg <span class="op">=</span> <span class="va">exp</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Term Contrast Effect   Pr(&gt;|z|) 2.5 % 97.5 %</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  mpg       +1  1.135 2.3808e-10 1.091   1.18</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Model type:  glm </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Prediction type:  response </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Pre-transformation:  function(hi, lo) log(mean(hi)/mean(lo)) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Average-transformation:  exp </span>
<span class="r-in"><span><span class="co"># cross contrasts</span></span></span>
<span class="r-in"><span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">gear</span><span class="op">)</span> <span class="op">+</span> <span class="va">hp</span>, data <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">cmp</span> <span class="op">&lt;-</span> <span class="fu">comparisons</span><span class="op">(</span><span class="va">mod</span>, variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cyl"</span>, <span class="st">"gear"</span><span class="op">)</span>, cross <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Model matrix is rank deficient. Some variance-covariance parameters are</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   missing.</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">cmp</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Term contrast_cyl contrast_gear  Effect Std. Error z value Pr(&gt;|z|)  2.5 %</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 cross        6 - 4         4 - 3 -0.6306      3.405 -0.1852  0.85307 -7.303</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 cross        6 - 4         5 - 3  2.6778      4.617  0.5800  0.56193 -6.372</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 cross        8 - 4         4 - 3  3.3475      6.427  0.5208  0.60249 -9.250</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 cross        8 - 4         5 - 3  5.5250      5.868  0.9416  0.34642 -5.976</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   97.5 %</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  6.042</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 11.727</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 15.945</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 17.026</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Model type:  lm </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Prediction type:  response </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># variable-specific contrasts</span></span></span>
<span class="r-in"><span><span class="va">cmp</span> <span class="op">&lt;-</span> <span class="fu">comparisons</span><span class="op">(</span><span class="va">mod</span>, variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>gear <span class="op">=</span> <span class="st">"sequential"</span>, hp <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Model matrix is rank deficient. Some variance-covariance parameters are</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   missing.</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">cmp</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Term Contrast  Effect Std. Error z value Pr(&gt;|z|)  2.5 %  97.5 %</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 gear    4 - 3  3.4095      2.587  1.3177 0.187591 -1.662  8.4806</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 gear    5 - 4  2.6277      2.747  0.9566 0.338744 -2.756  8.0113</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   hp      +10 -0.5741      0.225 -2.5518 0.010718 -1.015 -0.1331</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Model type:  lm </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Prediction type:  response </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># hypothesis test: is the `hp` marginal effect at the mean equal to the `drat` marginal effect</span></span></span>
<span class="r-in"><span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">wt</span> <span class="op">+</span> <span class="va">drat</span>, data <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">comparisons</span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">mod</span>,</span></span>
<span class="r-in"><span>    newdata <span class="op">=</span> <span class="st">"mean"</span>,</span></span>
<span class="r-in"><span>    hypothesis <span class="op">=</span> <span class="st">"wt = drat"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       type    term comparison std.error statistic      p.value conf.low</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 response wt=drat  -6.225381  1.051769 -5.918963 3.239776e-09 -8.28681</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   conf.high</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 -4.163952</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># same hypothesis test using row indices</span></span></span>
<span class="r-in"><span><span class="fu">comparisons</span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">mod</span>,</span></span>
<span class="r-in"><span>    newdata <span class="op">=</span> <span class="st">"mean"</span>,</span></span>
<span class="r-in"><span>    hypothesis <span class="op">=</span> <span class="st">"b1 - b2 = 0"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       type    term comparison std.error statistic      p.value conf.low</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 response b1-b2=0  -6.225381  1.051769 -5.918963 3.239776e-09 -8.28681</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   conf.high</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 -4.163952</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># same hypothesis test using numeric vector of weights</span></span></span>
<span class="r-in"><span><span class="fu">comparisons</span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">mod</span>,</span></span>
<span class="r-in"><span>    newdata <span class="op">=</span> <span class="st">"mean"</span>,</span></span>
<span class="r-in"><span>    hypothesis <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       type   term comparison std.error statistic      p.value conf.low</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 response custom  -6.225381  1.051769 -5.918963 3.239776e-09 -8.28681</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   conf.high</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 -4.163952</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># two custom contrasts using a matrix of weights</span></span></span>
<span class="r-in"><span><span class="va">lc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fl">1</span>, <span class="op">-</span><span class="fl">1</span>,</span></span>
<span class="r-in"><span>    <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">comparisons</span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">mod</span>,</span></span>
<span class="r-in"><span>    newdata <span class="op">=</span> <span class="st">"mean"</span>,</span></span>
<span class="r-in"><span>    hypothesis <span class="op">=</span> <span class="va">lc</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       type   term comparison std.error  statistic      p.value  conf.low</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 response custom  -6.225381  1.051769 -5.9189631 3.239776e-09  -8.28681</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 response custom  -5.238308  5.623757 -0.9314607 3.516153e-01 -16.26067</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   conf.high</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 -4.163952</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  5.784052</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># `by` argument</span></span></span>
<span class="r-in"><span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">hp</span> <span class="op">*</span> <span class="va">am</span> <span class="op">*</span> <span class="va">vs</span>, data <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">cmp</span> <span class="op">&lt;-</span> <span class="fu">comparisons</span><span class="op">(</span><span class="va">mod</span>, variables <span class="op">=</span> <span class="st">"hp"</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"vs"</span>, <span class="st">"am"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">cmp</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Term Contrast vs am   Effect Std. Error z value  Pr(&gt;|z|)    2.5 %    97.5 %</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   hp mean(+1)  0  1 -0.03685    0.01240  -2.971 0.0029676 -0.06116 -0.012540</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   hp mean(+1)  1  1 -0.11115    0.04634  -2.399 0.0164473 -0.20197 -0.020336</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   hp mean(+1)  1  0 -0.09941    0.05345  -1.860 0.0628876 -0.20417  0.005344</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   hp mean(+1)  0  0 -0.04215    0.02477  -1.702 0.0887904 -0.09070  0.006394</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Model type:  lm </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Prediction type:  response </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://www.stats.ox.ac.uk/pub/MASS4/" class="external-link">nnet</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/nnet/man/multinom.html" class="external-link">multinom</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">gear</span><span class="op">)</span> <span class="op">~</span> <span class="va">mpg</span> <span class="op">+</span> <span class="va">am</span> <span class="op">*</span> <span class="va">vs</span>, data <span class="op">=</span> <span class="va">mtcars</span>, trace <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">by</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"3"</span>, <span class="st">"4"</span>, <span class="st">"5"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"3,4"</span>, <span class="st">"3,4"</span>, <span class="st">"5"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">comparisons</span><span class="op">(</span><span class="va">mod</span>, type <span class="op">=</span> <span class="st">"probs"</span>, by <span class="op">=</span> <span class="va">by</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    type term    comparison   std.error   statistic     p.value    conf.low</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 probs  mpg  0.0004634916 0.005796055  0.07996674 0.936263711 -0.01089657</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 probs   am -0.2227925482 0.079557885 -2.80038299 0.005104201 -0.37872314</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 probs   vs  0.1021020743 0.073235805  1.39415514 0.163270760 -0.04143747</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 probs  mpg -0.0009269832 0.011592109 -0.07996674 0.936263711 -0.02364710</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 probs   am  0.4455850963 0.159115770  2.80038299 0.005104201  0.13372392</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 probs   vs -0.2042041486 0.146471610 -1.39415514 0.163270760 -0.49128323</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     conf.high  by</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  0.01182355 3,4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 -0.06686196 3,4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  0.24564161 3,4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  0.02179313   5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  0.75744628   5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  0.08287493   5</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Vincent Arel-Bundock.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

