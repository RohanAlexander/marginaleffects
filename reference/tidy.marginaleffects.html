<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Tidy a marginaleffects object — tidy.marginaleffects • marginaleffects</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/readable/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Tidy a marginaleffects object — tidy.marginaleffects"><meta property="og:description" content="Tidy a marginaleffects object"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">marginaleffects</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.5.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="https://vincentarelbundock.github.io/marginaleffects/articles/mfx01_predictions.html" class="external-link">Adjusted predictions</a>
</li>
<li>
  <a href="https://vincentarelbundock.github.io/marginaleffects/articles/mfx03_mfx.html" class="external-link">Marginal effects</a>
</li>
<li>
  <a href="https://vincentarelbundock.github.io/marginaleffects/articles/mfx02_contrasts.html" class="external-link">Contrasts</a>
</li>
<li>
  <a href="https://vincentarelbundock.github.io/marginaleffects/articles/mfx04_marginalmeans.html" class="external-link">Marginal means</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Tidy a <code>marginaleffects</code> object</h1>
    <small class="dont-index">Source: <a href="https://github.com/vincentarelbundock/marginaleffects/blob/HEAD/R/tidy.R" class="external-link"><code>R/tidy.R</code></a></small>
    <div class="hidden name"><code>tidy.marginaleffects.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Tidy a <code>marginaleffects</code> object</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="co"># S3 method for marginaleffects</span>
<span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">(</span><span class="va">x</span>, conf_level <span class="op">=</span> <span class="fl">0.95</span>, by <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>An object produced by the <code>marginaleffects</code> function.</p></dd>
<dt>conf_level</dt>
<dd><p>numeric value between 0 and 1. Confidence level to use to build a confidence interval.</p></dd>
<dt>by</dt>
<dd><p>Character vector of variable names over which to compute group-averaged marginal effects.</p></dd>
<dt>...</dt>
<dd><p>Additional arguments are passed to the <code><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict()</a></code> method
supplied by the modeling package.These arguments are particularly useful
for mixed-effects or bayesian models (see the online vignettes on the
<code>marginaleffects</code> website). Available arguments can vary from model to
model, depending on the range of supported arguments by each modeling
package. See the "Model-Specific Arguments" section of the
<code><a href="marginaleffects.html">?marginaleffects</a></code> documentation for a non-exhaustive list of available
arguments.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A "tidy" <code>data.frame</code> of summary statistics which conforms to the
<code>broom</code> package specification.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The <code>tidy</code> function calculates average marginal effects by taking the mean
of all the unit-level marginal effects computed by the <code>marginaleffects</code>
function.</p>
<p>The standard error of the average marginal effects is obtained by
taking the mean of each column of the Jacobian. . Then, we use this
"Jacobian at the mean" in the Delta method to obtained standard errors.</p>
<p>In Bayesian models (e.g., <code>brms</code>), we compute Average Marginal
Effects by applying the mean function twice. First, we apply it to all
marginal effects for each posterior draw, thereby estimating one Average (or
Median) Marginal Effect per iteration of the MCMC chain. Second, we take
the <code>mean</code> and <code>quantile</code> function to the results of Step 1 to obtain the
Average (or Median) Marginal Effect and its associated interval.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">hp</span> <span class="op">*</span> <span class="va">wt</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">gear</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span></span>
<span class="r-in"><span class="va">mfx</span> <span class="op">&lt;-</span> <span class="fu"><a href="marginaleffects.html">marginaleffects</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># average marginal effects</span></span>
<span class="r-in"><span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">(</span><span class="va">mfx</span><span class="op">)</span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>column(s) not removed because not found: [marginaleffects_weights_internal]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       type term contrast    estimate  std.error  statistic      p.value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 response   hp    dY/dX -0.03533001 0.01044818 -3.3814514 7.210400e-04</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 response   wt    dY/dX -3.52592595 0.73201579 -4.8167349 1.459264e-06</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 response gear    4 - 3  0.82900152 1.11804097  0.7414769 4.584043e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 response gear    5 - 3  1.81649741 1.54760505  1.1737474 2.404962e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      conf.low   conf.high</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 -0.05580807 -0.01485196</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 -4.96065052 -2.09120137</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 -1.36231851  3.02032155</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 -1.21675276  4.84974757</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># average marginal effects by group</span></span>
<span class="r-in"><span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">(</span><span class="va">mfx</span>, by <span class="op">=</span> <span class="st">"gear"</span><span class="op">)</span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>column(s) not removed because not found: [marginaleffects_weights_internal]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        type term contrast gear    estimate  std.error  statistic      p.value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  response   hp    dY/dX    4 -0.05180745 0.01142353 -4.5351547 5.756127e-06</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  response   hp    dY/dX    3 -0.01680129 0.01157623 -1.4513608 1.466794e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  response   hp    dY/dX    5 -0.05137031 0.01137555 -4.5158527 6.306250e-06</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  response   wt    dY/dX    4 -5.09490667 0.88830072 -5.7355652 9.718772e-09</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  response   wt    dY/dX    3 -2.71805806 0.74163507 -3.6649535 2.473835e-04</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  response   wt    dY/dX    5 -2.18397588 0.78316845 -2.7886413 5.292965e-03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  response gear    4 - 3    4  0.82900152 1.11804097  0.7414769 4.584043e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  response gear    4 - 3    3  0.82900152 1.11804097  0.7414769 4.584043e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  response gear    4 - 3    5  0.82900152 1.11804097  0.7414769 4.584043e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 response gear    5 - 3    4  1.81649741 1.54760505  1.1737474 2.404962e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 response gear    5 - 3    3  1.81649741 1.54760505  1.1737474 2.404962e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 response gear    5 - 3    5  1.81649741 1.54760505  1.1737474 2.404962e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       conf.low    conf.high</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  -0.07419715 -0.029417756</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  -0.03949030  0.005887709</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  -0.07366598 -0.029074642</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  -6.83594409 -3.353869244</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  -4.17163610 -1.264480027</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  -3.71895783 -0.648993930</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  -1.36231851  3.020321553</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  -1.36231851  3.020321553</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  -1.36231851  3.020321553</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 -1.21675276  4.849747574</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 -1.21675276  4.849747574</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 -1.21675276  4.849747574</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Vincent Arel-Bundock.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

      </footer></div>

  


  

  </body></html>

